# speckit-sync-tool éšæ®µ 2ï¼šå¤šä»£ç†æ”¯æ´æ¶æ§‹è¨­è¨ˆ

## å°ˆæ¡ˆæ¦‚è¿°

speckit-sync-tool æ˜¯ä¸€å€‹åŒæ­¥å·¥å…·ï¼Œç”¨æ–¼å°‡ GitHub spec-kit å°ˆæ¡ˆçš„å‘½ä»¤æª”æ¡ˆåŒæ­¥åˆ°æœ¬åœ°å°ˆæ¡ˆï¼Œæ”¯æ´ 13 ç¨® AI ä»£ç†ã€‚

## ä»£ç†æ˜ å°„è¡¨

```bash
AGENTS = {
    "claude": ".claude/commands/",
    "copilot": ".github/prompts/",
    "gemini": ".gemini/commands/",
    "cursor": ".cursor/commands/",
    "qwen": ".qwen/commands/",
    "opencode": ".opencode/commands/",
    "codex": ".codex/commands/",
    "windsurf": ".windsurf/workflows/",
    "kilocode": ".kilocode/commands/",
    "auggie": ".augment/commands/",
    "codebuddy": ".codebuddy/commands/",
    "roo": ".roo/commands/",
    "q": ".amazonq/commands/"
}
```

## æ ¸å¿ƒåŠŸèƒ½è¨­è¨ˆ

### 1. ä»£ç†è‡ªå‹•æª¢æ¸¬ (`detect_agents()`)

**ç›®çš„**ï¼šæƒæå°ˆæ¡ˆæ ¹ç›®éŒ„ï¼Œæª¢æ¸¬å·²å®‰è£çš„ AI ä»£ç†

**è¼¸å…¥**ï¼šå°ˆæ¡ˆæ ¹ç›®éŒ„è·¯å¾‘
**è¼¸å‡º**ï¼šæª¢æ¸¬åˆ°çš„ä»£ç†åˆ—è¡¨ï¼ˆagent_name:directory æ ¼å¼ï¼‰

**é‚è¼¯**ï¼š
1. éæ­· AGENTS å­—å…¸
2. æª¢æŸ¥æ¯å€‹ä»£ç†çš„ç›®éŒ„æ˜¯å¦å­˜åœ¨
3. è¿”å›å·²å­˜åœ¨çš„ä»£ç†è³‡è¨Š

**è¼¸å‡ºç¯„ä¾‹**ï¼š
```
claude:.claude/commands
cursor:.cursor/commands
copilot:.github/prompts
```

### 2. å¤šä»£ç†åˆå§‹åŒ– (`cmd_init()`)

**ç›®çš„**ï¼šäº’å‹•å¼é¸æ“‡è¦åŒæ­¥çš„ä»£ç†ä¸¦å»ºç«‹é…ç½®

**æµç¨‹**ï¼š
1. å‘¼å« `detect_agents()` æª¢æ¸¬ç¾æœ‰ä»£ç†
2. é¡¯ç¤ºäº’å‹•å¼é¸å–®
3. ç”¨æˆ¶é¸æ“‡è¦å•Ÿç”¨çš„ä»£ç†
4. ç‚ºæ¯å€‹ä»£ç†å»ºç«‹é…ç½®ä¸¦åˆå§‹åŒ–

**äº’å‹•ç¯„ä¾‹**ï¼š
```
ğŸ” æƒæå°ˆæ¡ˆç›®éŒ„...

ğŸ¤– æª¢æ¸¬åˆ°ä»¥ä¸‹ AI ä»£ç†ï¼š
  1. âœ“ Claude Code (.claude/commands) - å·²å®‰è£
  2. âœ“ Cursor (.cursor/commands) - å·²å®‰è£
  3. âœ— GitHub Copilot (.github/prompts) - æœªå®‰è£

é¸æ“‡è¦åŒæ­¥çš„ä»£ç†ï¼ˆç©ºæ ¼åˆ†éš”ï¼Œæˆ– Enter å…¨é¸å·²å®‰è£ï¼‰ï¼š
[1,2] > 1 2

âœ“ å·²é¸æ“‡: Claude Code, Cursor
ğŸ“ æ­£åœ¨åˆå§‹åŒ–é…ç½®...
```

### 3. å¤šä»£ç†åŒæ­¥ (`sync_all_agents()`)

**ç›®çš„**ï¼šç‚ºæ‰€æœ‰å•Ÿç”¨çš„ä»£ç†åŒæ­¥å‘½ä»¤æª”æ¡ˆ

**æµç¨‹**ï¼š
1. è®€å–é…ç½®æª”æ¡ˆ
2. éæ­·æ‰€æœ‰å•Ÿç”¨çš„ä»£ç†
3. ç‚ºæ¯å€‹ä»£ç†åŸ·è¡ŒåŒæ­¥é‚è¼¯
4. æ›´æ–°å„è‡ªçš„ last_sync æ™‚é–“
5. é¡¯ç¤ºåŒæ­¥ç‹€æ…‹

**è¼¸å‡ºç¯„ä¾‹**ï¼š
```
ğŸ”„ åŒæ­¥ä»£ç†å‘½ä»¤...

  Claude Code (.claude/commands)
    âœ“ specify.md (synced)
    âœ“ plan.md (synced)
    âœ“ tasks.md (synced)

  Cursor (.cursor/commands)
    âœ“ specify.md (synced)
    ! custom-cmd.md (customized - skipped)
    âœ“ plan.md (synced)

âœ… åŒæ­¥å®Œæˆï¼2 å€‹ä»£ç†å·²æ›´æ–°
```

### 4. é…ç½®æª”æ¡ˆ v2.0.0

**çµæ§‹è¨­è¨ˆ**ï¼š

```json
{
  "version": "2.0.0",
  "source": {
    "repo": "github/spec-kit",
    "branch": "main",
    "last_fetch": "2025-10-16T12:00:00Z"
  },
  "agents": {
    "claude": {
      "enabled": true,
      "commands_dir": ".claude/commands",
      "commands": {
        "standard": [
          "specify.md",
          "plan.md",
          "tasks.md",
          "implement.md"
        ],
        "custom": [],
        "synced": [
          "specify.md",
          "plan.md",
          "tasks.md"
        ],
        "customized": []
      },
      "last_sync": "2025-10-16T12:00:00Z"
    },
    "cursor": {
      "enabled": true,
      "commands_dir": ".cursor/commands",
      "commands": {
        "standard": ["specify.md", "plan.md"],
        "custom": ["custom-cmd.md"],
        "synced": ["specify.md", "plan.md"],
        "customized": []
      },
      "last_sync": "2025-10-16T11:30:00Z"
    },
    "copilot": {
      "enabled": false,
      "commands_dir": ".github/prompts",
      "commands": {
        "standard": [],
        "custom": [],
        "synced": [],
        "customized": []
      },
      "last_sync": null
    }
  },
  "known_commands": [
    "specify.md",
    "plan.md",
    "tasks.md",
    "implement.md",
    "constitution.md",
    "clarify.md",
    "analyze.md",
    "checklist.md"
  ]
}
```

### 5. é…ç½®å‡ç´šé‚è¼¯ (`upgrade_config_to_v2()`)

**ç›®çš„**ï¼šå¾ v1.x å¹³æ»‘å‡ç´šåˆ° v2.0.0

**æµç¨‹**ï¼š
1. æª¢æ¸¬é…ç½®ç‰ˆæœ¬
2. å‚™ä»½èˆŠé…ç½® (`.speckit-sync-config.v1.backup.json`)
3. è®€å–èˆŠé…ç½®è³‡æ–™
4. è‡ªå‹•æª¢æ¸¬å°ˆæ¡ˆä¸­çš„ä»£ç†
5. é·ç§»è³‡æ–™åˆ°æ–°æ ¼å¼
6. å„²å­˜æ–°é…ç½®

**å‘å¾Œç›¸å®¹æ€§**ï¼š
- v1.0.0 â†’ v2.0.0ï¼šé·ç§» Claude å–®ä»£ç†é…ç½®åˆ°å¤šä»£ç†
- v1.1.0 â†’ v2.0.0ï¼šé·ç§»åˆ†é¡ç³»çµ±åˆ°å¤šä»£ç†

### 6. CLI å‘½ä»¤æ“´å……

```bash
# ä»£ç†æª¢æ¸¬ï¼ˆä¸åˆå§‹åŒ–ï¼‰
speckit-sync detect-agents
# è¼¸å‡ºï¼š
# ğŸ¤– æª¢æ¸¬åˆ°çš„ä»£ç†ï¼š
#   âœ“ claude (.claude/commands)
#   âœ“ cursor (.cursor/commands)
#   âœ— copilot (.github/prompts) - ç›®éŒ„ä¸å­˜åœ¨

# æª¢æŸ¥ç‰¹å®šä»£ç†
speckit-sync check --agent claude
# è¼¸å‡ºï¼š
# âœ“ Claude Code
#   ç›®éŒ„: .claude/commands
#   ç‹€æ…‹: å·²åŒæ­¥
#   æœ€å¾ŒåŒæ­¥: 2025-10-16 12:00:00
#   å‘½ä»¤: 8 å€‹ (4 synced, 0 custom, 0 customized, 4 available)

# æ›´æ–°ç‰¹å®šä»£ç†
speckit-sync update --agent cursor
# è¼¸å‡ºï¼š
# ğŸ”„ æ›´æ–° Cursor...
# âœ“ 3 å€‹å‘½ä»¤å·²åŒæ­¥

# æ›´æ–°æ‰€æœ‰ä»£ç†
speckit-sync update --agent all
# æˆ–
speckit-sync update
# è¼¸å‡ºï¼š
# ğŸ”„ æ›´æ–°æ‰€æœ‰ä»£ç†...
# âœ“ Claude: 4 å€‹å‘½ä»¤å·²åŒæ­¥
# âœ“ Cursor: 3 å€‹å‘½ä»¤å·²åŒæ­¥
# âš ï¸ Copilot: æœªå•Ÿç”¨ï¼Œè·³é
```

## å¯¦ä½œç´°ç¯€

### éŒ¯èª¤è™•ç†ç­–ç•¥

1. **ä»£ç†ç¨ç«‹æ€§**ï¼šæŸå€‹ä»£ç†å¤±æ•—ä¸æ‡‰å½±éŸ¿å…¶ä»–ä»£ç†
2. **éƒ¨åˆ†æˆåŠŸ**ï¼šé¡¯ç¤ºè©³ç´°çš„æˆåŠŸ/å¤±æ•—å ±å‘Š
3. **å›æ»¾æ©Ÿåˆ¶**ï¼šé…ç½®å‡ç´šå¤±æ•—æ™‚è‡ªå‹•å›æ»¾åˆ°å‚™ä»½

### ä¸¦è¡Œè™•ç†è€ƒé‡

```bash
# éšæ®µ 2 å…ˆå¯¦ä½œé †åºè™•ç†
# éšæ®µ 3 å†åŠ å…¥ä¸¦è¡ŒåŒæ­¥ï¼ˆä½¿ç”¨ GNU parallel æˆ– xargs -Pï¼‰
sync_agent "claude"
sync_agent "cursor"
sync_agent "copilot"

# æœªä¾†ä¸¦è¡Œç‰ˆæœ¬ï¼ˆéšæ®µ 3ï¼‰
export -f sync_agent
printf '%s\n' "claude" "cursor" "copilot" | parallel sync_agent
```

### è³‡æ–™çµæ§‹è¨­è¨ˆåŸå‰‡

1. **æ‰å¹³åŒ–**ï¼šé¿å…éæ·±çš„åµŒå¥—çµæ§‹
2. **å¯æ“´å±•**ï¼šæ–°å¢ä»£ç†ä¸éœ€ä¿®æ”¹æ ¸å¿ƒé‚è¼¯
3. **å‘å¾Œç›¸å®¹**ï¼šèˆŠç‰ˆé…ç½®å¯è‡ªå‹•å‡ç´š
4. **åŸå­æ€§**ï¼šé…ç½®æ›´æ–°ä½¿ç”¨è‡¨æ™‚æª”æ¡ˆ + mv ç¢ºä¿åŸå­æ€§

## æ¸¬è©¦è¨ˆç•«

### å–®å…ƒæ¸¬è©¦
- [ ] `detect_agents()` - æª¢æ¸¬é‚è¼¯
- [ ] `upgrade_config_to_v2()` - é…ç½®å‡ç´š
- [ ] `sync_single_agent()` - å–®ä»£ç†åŒæ­¥
- [ ] `sync_all_agents()` - å¤šä»£ç†åŒæ­¥

### æ•´åˆæ¸¬è©¦
- [ ] v1.0.0 â†’ v2.0.0 å‡ç´š
- [ ] v1.1.0 â†’ v2.0.0 å‡ç´š
- [ ] å¤šä»£ç†åŒæ™‚åŒæ­¥
- [ ] éƒ¨åˆ†å¤±æ•—è™•ç†

### é‚Šç•Œæ¸¬è©¦
- [ ] ç„¡ä»£ç†ç›®éŒ„çš„å°ˆæ¡ˆ
- [ ] æ‰€æœ‰ä»£ç†éƒ½å®‰è£çš„å°ˆæ¡ˆ
- [ ] é…ç½®æª”æ¡ˆæå£
- [ ] ç¶²è·¯é€£ç·šå¤±æ•—

## éšæ®µåŠƒåˆ†

### éšæ®µ 2ï¼ˆæœ¬æ¬¡å¯¦ä½œï¼‰
- [x] ä»£ç†è‡ªå‹•æª¢æ¸¬
- [x] å¤šä»£ç†åˆå§‹åŒ–
- [x] é…ç½®æª”æ¡ˆ v2.0.0
- [x] é…ç½®å‡ç´šé‚è¼¯
- [x] åŸºæœ¬ CLI å‘½ä»¤
- [x] é †åºåŒæ­¥

### éšæ®µ 3ï¼ˆæœªä¾†ï¼‰
- [ ] ä¸¦è¡ŒåŒæ­¥å„ªåŒ–
- [ ] å·®ç•°æª¢æ¸¬å„ªåŒ–
- [ ] å¢é‡åŒæ­¥
- [ ] è¡çªè§£æ±ºä»‹é¢
- [ ] æ€§èƒ½ç›£æ§

## è¨­è¨ˆæ±ºç­–

### ç‚ºä½•é¸æ“‡é †åºåŒæ­¥ï¼Ÿ
- **ç°¡å–®æ€§**ï¼šéšæ®µ 2 å„ªå…ˆåŠŸèƒ½å®Œæ•´æ€§è€Œéæ•ˆèƒ½
- **å¯é æ€§**ï¼šé †åºåŸ·è¡Œæ›´å®¹æ˜“é™¤éŒ¯å’ŒéŒ¯èª¤è™•ç†
- **æ¼¸é€²å¼**ï¼šå…ˆå»ºç«‹ç©©å›ºåŸºç¤ï¼Œå†å„ªåŒ–æ•ˆèƒ½

### ç‚ºä½•ç¨ç«‹è¿½è¹¤æ¯å€‹ä»£ç†ï¼Ÿ
- **éˆæ´»æ€§**ï¼šä¸åŒä»£ç†å¯èƒ½æœ‰ä¸åŒçš„åŒæ­¥ç­–ç•¥
- **ç²¾ç¢ºæ€§**ï¼šæ¯å€‹ä»£ç†çš„ç‹€æ…‹ç¨ç«‹ç®¡ç†
- **æ“´å±•æ€§**ï¼šæœªä¾†å¯ä»¥ç‚ºç‰¹å®šä»£ç†è¨­å®šä¸åŒçš„åŒæ­¥é »ç‡

### ç‚ºä½•ä½¿ç”¨ JSON é…ç½®ï¼Ÿ
- **çµæ§‹åŒ–**ï¼šæ˜“æ–¼è§£æå’Œé©—è­‰
- **å·¥å…·æ”¯æ´**ï¼š`jq` æä¾›å¼·å¤§çš„æŸ¥è©¢èƒ½åŠ›
- **å¯è®€æ€§**ï¼šäººé¡å¯è®€ï¼Œä¾¿æ–¼é™¤éŒ¯
- **ç‰ˆæœ¬æ§åˆ¶**ï¼šæ˜“æ–¼è¿½è¹¤é…ç½®è®Šæ›´

---

**æ–‡æª”ç‰ˆæœ¬**: 1.0.0
**æœ€å¾Œæ›´æ–°**: 2025-10-16
**ä½œè€…**: Claude Code
